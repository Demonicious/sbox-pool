@using Sandbox;
@using Sandbox.UI;
@using Sandbox.UI.Construct;
@using System;

@namespace Facepunch.Pool
@attribute [StyleSheet( "/ui/LoadingScreen.scss" )]
@inherits Panel

<root>
    <label class="loading">Loading</label>
</root>

@code
{
	public override void Tick()
	{
		if ( Game.Instance == null ) return;
			
		var isHidden = (Local.Pawn is Player player && player.Camera != null);
		var round = Game.Instance.Round;

		if ( round is PlayRound )
		{
			var playerOne = Game.Instance.PlayerOne;
			var playerTwo = Game.Instance.PlayerTwo;
			var cue = Game.Instance.Cue;

			if ( !playerOne.IsValid() || !playerTwo.IsValid() || !cue.IsValid() )
				isHidden = false;
		}

		SetClass( "hidden", isHidden );

		base.Tick();
	}
}
